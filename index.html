<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LES FLOTS BLEUS</title>
  <style>
    :root {
      --sea:#1e88e5; --sky:#e3f2fd; --sand:#f5efe6; --text:#0f172a; --muted:#64748b;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:'Segoe UI','Helvetica Neue',Arial,sans-serif;background:linear-gradient(to bottom,#f7fbff,var(--sand));color:var(--text)}
    header{position:sticky;top:0;z-index:10;padding:18px;background:linear-gradient(135deg,#6ec6ff,#b3e5fc);color:#fff;text-align:center}
    header h1{margin:0;font-size:28px;font-weight:700}
    header p{margin:6px 0 0;font-size:18px;font-weight:700}
    .container{display:grid;grid-template-columns:96px 1fr;min-height:calc(100vh - 72px)}
    nav{background:rgba(255,255,255,.9);border-right:1px solid #e5e7eb;padding:20px 12px;display:flex;flex-direction:column;justify-content:center;gap:24px}
    nav button{padding:18px;border-radius:24px;border:none;background:#fff;color:var(--sea);font-weight:600;box-shadow:0 10px 20px rgba(0,0,0,.12);cursor:pointer}
    nav button.active{background:linear-gradient(to bottom,var(--sea),#4fc3f7);color:#fff}
    main{padding:14px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:14px}
    .card{background:#fff;border-radius:20px;padding:14px;box-shadow:0 8px 20px rgba(0,0,0,.15)}
    .card img{width:100%;height:140px;object-fit:cover;border-radius:14px}
    .price{font-weight:700;color:var(--sea)}
    footer{text-align:center;padding:12px;font-size:12px;color:var(--muted)}
    .hidden{display:none}
    .admin{max-width:900px;margin:auto;padding:20px}
    .row{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
    input,textarea,select{padding:10px;border-radius:12px;border:1px solid #cbd5e1}
    .btn{padding:10px 14px;border-radius:14px;border:none;font-weight:600;cursor:pointer}
    .btn.primary{background:linear-gradient(to right,var(--sea),#4fc3f7);color:#fff}
    table{width:100%;border-collapse:collapse;margin-top:16px;font-size:12px}
    th,td{padding:8px;border-bottom:1px solid #e5e7eb}
  </style>
</head>
<body>
<header>
  <h1>LES FLOTS BLEUS</h1>
  <p>snack de la plage</p>
</header>

<div class="container" id="shop">
  <nav id="cats"></nav>
  <main><div class="grid" id="products"></div></main>
</div>

<div class="admin hidden" id="admin">
  <button class="btn" onclick="backToShop()">← Retour au site</button>
  <h2>Administration</h2>
  <div id="login">
    <div class="row">
      <input id="u" placeholder="Utilisateur">
      <input id="p" type="password" placeholder="Mot de passe">
      <button class="btn primary" onclick="login()">Connexion</button>
    </div>
  </div>
  <div id="panel" class="hidden">
    <h3>Catégories</h3>
    <input id="newCat" placeholder="Nouvelle catégorie">
    <button class="btn" onclick="addCat()">Ajouter</button>
    <ul id="catList"></ul>

    <h3>Produits</h3>
    <div class="row">
      <input id="name" placeholder="Nom du produit">
      <input id="price" placeholder="Prix €">
      <input id="img" placeholder="Image URL">
      <select id="cat"></select>
    </div>
    <textarea id="desc" placeholder="Description"></textarea><br><br>
    <button class="btn primary" onclick="save()">Enregistrer</button>
    <table id="table"></table>
  </div>
</div>

<script>
  const DEFAULT_CATS=['sandwich','hamburger','boisson','dessert'];
  let state=JSON.parse(localStorage.getItem('lfb_fr'))||{cats:DEFAULT_CATS,products:[],nextId:1};
  const elName=name,elPrice=price,elImg=img,elDesc=desc,elCat=cat;
  function persist(){localStorage.setItem('lfb_fr',JSON.stringify(state))}

  function renderCats(){
    cats.innerHTML='';
    state.cats.forEach((c,i)=>{
      const b=document.createElement('button');b.textContent=c;if(i===0)b.classList.add('active');
      b.onclick=()=>filter(c,b);cats.appendChild(b);
    });fillCats();if(state.cats[0])filter(state.cats[0]);
  }
  function filter(cat,b){document.querySelectorAll('nav button').forEach(x=>x.classList.remove('active'));if(b)b.classList.add('active');products.innerHTML='';state.products.filter(p=>p.cat===cat).forEach(p=>{products.innerHTML+=`<div class='card'><img src='${p.img||"https://via.placeholder.com/300"}'><h3>${p.name}</h3><div class='price'>${p.price} €</div><div>${p.desc}</div></div>`})}

  function openAdmin(){shop.classList.add('hidden');admin.classList.remove('hidden')}
  function backToShop(){admin.classList.add('hidden');shop.classList.remove('hidden')}
  if(location.hash==='#admin')openAdmin();

  function login(){if(u.value==='zhang'&&p.value==='fabrice'){login.classList.add('hidden');panel.classList.remove('hidden');drawCats();drawTable()}else alert('Erreur')}

  function fillCats(){elCat.innerHTML='';state.cats.forEach(c=>{const o=document.createElement('option');o.value=c;o.textContent=c;elCat.appendChild(o)})}

  function addCat(){const v=newCat.value.trim();if(v&&!state.cats.includes(v)){state.cats.push(v);persist();renderCats();drawCats();newCat.value=''}}
  function delCat(c){state.cats=state.cats.filter(x=>x!==c);state.products=state.products.filter(p=>p.cat!==c);persist();renderCats();drawCats()}
  function drawCats(){catList.innerHTML='';state.cats.forEach(c=>{catList.innerHTML+=`<li>${c} <button onclick="delCat('${c}')">x</button></li>`})}

  let editing=null;
  function save(){const p={id:editing||state.nextId++,name:elName.value,price:elPrice.value,img:elImg.value,desc:elDesc.value,cat:elCat.value};if(editing){state.products=state.products.map(x=>x.id===editing?p:x);editing=null}else state.products.push(p);persist();drawTable();renderCats();elName.value=elPrice.value=elImg.value=elDesc.value=''}
  function drawTable(){table.innerHTML='<tr><th>Nom</th><th>Cat.</th><th></th></tr>';state.products.forEach(p=>{table.innerHTML+=`<tr><td>${p.name}</td><td>${p.cat}</td><td><button onclick="del(${p.id})">Supprimer</button></td></tr>`})}
  function del(id){state.products=state.products.filter(p=>p.id!==id);persist();drawTable();renderCats()}

  renderCats();
</script>
</body>
</html>
